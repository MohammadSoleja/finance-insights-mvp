<!-- Roadmap/Timeline View for Tasks -->
<div class="roadmap-view">
  <div class="roadmap-controls">
    <div class="zoom-controls">
      <button class="btn btn-secondary" onclick="zoomTimeline('day')">Day</button>
      <button class="btn btn-secondary active" onclick="zoomTimeline('week')">Week</button>
      <button class="btn btn-secondary" onclick="zoomTimeline('month')">Month</button>
    </div>
    <div class="timeline-nav">
      <button class="btn btn-secondary" onclick="navigateTimeline('prev')">â† Previous</button>
      <span id="current-period">{{ current_period }}</span>
      <button class="btn btn-secondary" onclick="navigateTimeline('next')">Next â†’</button>
      <button class="btn btn-secondary" onclick="navigateTimeline('today')">Today</button>
    </div>
  </div>

  <div class="roadmap-container" id="roadmap-container">
    <div class="roadmap-sidebar">
      <div class="roadmap-header-spacer"></div>
      {% for task in tasks_with_dates %}
      <div class="roadmap-task-label" data-task-id="{{ task.id }}">
        <span class="task-number">#{{ task.task_number }}</span>
        <span class="task-title">{{ task.title|truncatechars:30 }}</span>
        <span class="priority-badge-mini priority-{{ task.priority }}">
          {% if task.priority == 'critical' %}ğŸ”´
          {% elif task.priority == 'high' %}ğŸŸ 
          {% elif task.priority == 'medium' %}ğŸŸ¡
          {% else %}ğŸŸ¢{% endif %}
        </span>
      </div>
      {% endfor %}
    </div>

    <div class="roadmap-timeline">
      <div class="timeline-header" id="timeline-header">
        <!-- Dynamically generated by JavaScript -->
      </div>

      <div class="timeline-grid" id="timeline-grid">
        {% for task in tasks_with_dates %}
        <div class="timeline-row" data-task-id="{{ task.id }}">
          <div class="timeline-bar-container">
            <div class="timeline-bar status-{{ task.status }}"
                 data-start="{{ task.start_date|date:'Y-m-d' }}"
                 data-end="{{ task.due_date|date:'Y-m-d' }}"
                 onclick="openTaskDetails({{ task.id }})">
              <span class="timeline-bar-label">{{ task.title|truncatechars:20 }}</span>
              {% if task.assignee %}
              <span class="timeline-assignee">{{ task.assignee.username.0|upper }}</span>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      <div class="today-marker" id="today-marker"></div>
    </div>
  </div>

  {% if milestones %}
  <div class="milestones-track">
    <h3>Milestones</h3>
    <div class="milestones-container">
      {% for milestone in milestones %}
      <div class="milestone-marker" data-date="{{ milestone.due_date|date:'Y-m-d' }}" title="{{ milestone.name }}">
        <div class="milestone-icon">ğŸ¯</div>
        <span class="milestone-name">{{ milestone.name }}</span>
        <span class="milestone-date">{{ milestone.due_date|date:"M d, Y" }}</span>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  {% if not tasks_with_dates %}
  <div class="roadmap-empty-state">
    <h3>No tasks with dates</h3>
    <p>Add start and due dates to tasks to see them on the roadmap</p>
  </div>
  {% endif %}
</div>

